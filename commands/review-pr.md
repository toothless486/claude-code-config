# PR Review Command

변경된 파일들을 C/C++ 코딩 가이드라인에 따라 리뷰한다.

## 사용법
```
/review-pr <base-branch>
```
- `<base-branch>`: 비교할 베이스 브랜치 (예: `origin/release/R3.4.0`, `origin/develop`)
- 필수 입력

## 리뷰 절차

### 1. 변경 사항 확인
비교할 브랜치: **$ARGUMENTS**

```bash
git diff --name-only $ARGUMENTS...HEAD
```

### 2. 중복 코드 분석
각 변경 파일에 대해:
- 프로젝트 내 유사한 코드 패턴 검색
- 3회 이상 반복되는 로직 식별
- 공통화 가능 여부 판단

### 3. 가독성 체크리스트
- [ ] 함수 길이 50줄 이내
- [ ] 중첩 깊이 3단계 이내
- [ ] 매직 넘버 없음 (상수로 정의)
- [ ] 네이밍: 동사_목적어 형태 함수명, 의미 있는 변수명
- [ ] 주석: why 설명 (what 아님)

### 4. C/C++ 베스트 프랙티스
- NULL 체크 패턴 일관성
- 메모리 관리 (malloc/free 짝)
- 에러 처리 패턴
- 헤더 가드 존재 여부

## 출력 형식

아래 형식을 기본으로 하되, **각 항목마다 왜 문제가 되는지(배경 설명), 어떤 가이드라인/원칙에 위배되는지, 어떻게 고치면 되는지(구체적인 리팩터링 방향과 최소 1개 이상의 코드 레벨 예시)** 를 포함한다.

```markdown
## PR 리뷰 결과

### 🔴 필수 수정
- [파일:라인] 한 줄 요약 (무엇이 문제인지)
  - 상세 설명: 왜 문제가 되는지, 어떤 상황에서 장애/버그/유지보수 비용을 유발할 수 있는지 서술
  - 관련 가이드라인:
    - 예: "단일 함수는 50줄 이내로 유지", "RAII를 통해 자원 누수 방지", "에러 처리 경로에서 exit 직접 호출 금지" 등
  - 개선 제안:
    - 예: 함수 분리, 공통 유틸로 추출, 안전한 API 사용 등 구체적인 리팩터링 방향을 bullet 로 제시
  - 코드 예시(전/후 비교 또는 의사코드 가능):
    - before: 문제가 되는 코드 패턴 간단히 인용
    - after: 개선된 구조/인터페이스 예시 제시

### 🟡 권장 수정
- [파일:라인] 한 줄 요약 (개선 포인트)
  - 상세 설명: 현재 구현도 동작은 하지만, 가독성/유지보수성/확장성 측면에서 부족한 이유 설명
  - 관련 가이드라인:
    - 예: "매직 넘버를 명명된 상수로 치환", "중복 로직을 헬퍼 함수로 추출", "에러 로그에 원인/컨텍스트 포함" 등
  - 개선 제안:
    - 예: 변수/함수명 변경, 상수/enum 도입, 공통 래퍼 함수 도입 등
  - 코드 예시:
    - 작은 단위의 전/후 예시 또는 추천 인터페이스 형태를 보여주어, 구현자가 그대로 따라 하기 쉽게 작성

### 🟢 잘된 점
- 긍정적 피드백
  - 예: 역할 분리, 테스트 커버리지, 현대 C++ 사용, 에러 핸들링/로그 품질 등 구체적인 장점 언급

### 📊 중복 코드 분석
- 발견된 중복 패턴과 공통화 제안
  - 예: 3회 이상 반복되는 배치 처리 패턴, 에러 로깅 패턴 등을 식별하고, 별도 유틸/헬퍼/클래스로 추출할 수 있는지 제안
  - 공통화 전/후 구조를 간단한 다이어그램 또는 의사코드 형태로 설명 (예: BatchProcessor 템플릿, 공통 DB 래퍼 등)
```

## 입력
$ARGUMENTS

